<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layouts/defaultWebAdmin::layout(~{::section})}">
<head>
    <meta charset="utf-8">
    <title>DASHMIN - Bootstrap Admin Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">


</head>

<body>

<!-- Content Start -->
<section>

    <div class="dashboard-wrapper">
        <div class="dashboard-ecommerce">
            <div class="container-fluid dashboard-content ">
                <!-- ============================================================== -->
                <!-- pageheader  -->
                <!-- ============================================================== -->
                <div class="row">
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                        <div class="page-header">
                            <h2 class="pageheader-title">E-commerce Dashboard Template </h2>
                            <p class="pageheader-text">Nulla euismod urna eros, sit amet scelerisque torton lectus
                                vel mauris facilisis faucibus at enim quis massa lobortis rutrum.</p>
                            <div class="page-breadcrumb">
                                <nav aria-label="breadcrumb">
                                    <ol class="breadcrumb">
                                        <li class="breadcrumb-item"><a href="#"
                                                                       class="breadcrumb-link">Dashboard</a></li>
                                        <li class="breadcrumb-item active" aria-current="page">E-Commerce Dashboard
                                            Template
                                        </li>
                                    </ol>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ============================================================== -->
                <!-- end pageheader  -->
                <!-- ============================================================== -->
                <div class="ecommerce-widget">

                    <div class="row">
                        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="text-muted">Doanh thu</h5>
                                    <div class="metric-value d-inline-block">
                                        <h1 class="mb-1" th:text="${revenue}"></h1>
                                    </div>
                                    <div
                                            class="metric-label d-inline-block float-right text-success font-weight-bold">
                                        <span><i class="fa fa-fw fa-arrow-up"></i></span><span>0%</span>
                                    </div>
                                </div>
                                <div id="sparkline-revenue"></div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="text-muted">Số lượng sản phẩm</h5>
                                    <div class="metric-value d-inline-block">
                                        <h1 class="mb-1" th:text="${productQuantity}"></h1>
                                    </div>
                                    <div
                                            class="metric-label d-inline-block float-right text-success font-weight-bold">
                                        <span><i class="fa fa-fw fa-arrow-up"></i></span><span>0%</span>
                                    </div>
                                </div>
                                <div id="sparkline-revenue2"></div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="text-muted">Số lượng khách hàng</h5>
                                    <div class="metric-value d-inline-block">
                                        <h1 class="mb-1" th:text="${userQuantity}"></h1>
                                    </div>
                                    <div
                                            class="metric-label d-inline-block float-right text-primary font-weight-bold">
                                        <span>N/A</span>
                                    </div>
                                </div>
                                <div id="sparkline-revenue3"></div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-12 col-12">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="text-muted">Số lượng đã bán</h5>
                                    <div class="metric-value d-inline-block">
                                        <h1 class="mb-1" th:text="${quantitySale}"></h1>
                                    </div>
                                    <div
                                            class="metric-label d-inline-block float-right text-secondary font-weight-bold">
                                        <span>0%</span>
                                    </div>
                                </div>
                                <div id="sparkline-revenue4"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row p-b-30">
                        <!-- ============================================================== -->
                        <!-- pie chart  -->
                        <!-- ============================================================== -->
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                            <div class="card">
                                <h5 class="card-header">Pie Charts</h5>
                                <div class="card-body">
                                    <canvas id="chartjs_pie"></canvas>
                                </div>
                            </div>
                        </div>
                        <!-- ============================================================== -->
                        <!-- end pie chart  -->
                        <!-- ============================================================== -->
                        <!-- ============================================================== -->
                        <!-- doughnut chart  -->
                        <!-- ============================================================== -->
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">

                            <div class="form-group">
                                <label>Thống kê</label>
                                <div class="col-sm-12 pl-0">
                                    <label class="custom-control custom-radio custom-control-inline">
                                        <input type="radio" name="optionsChoice" value="yes" checked
                                               class="custom-control-input" required><span
                                            class="custom-control-label">Tháng và năm</span>
                                    </label>
                                    <label class="custom-control custom-radio custom-control-inline">
                                        <input type="radio" name="optionsChoice" value="no"
                                               class="custom-control-input" required><span
                                            class="custom-control-label">Ngày - Tháng - Năm</span>
                                    </label>
                                </div>
                            </div>

                            <div class="calendar-container" id="filter-with-month-year">

                                <form th:action="@{/admin/calendar}" method="post">
                                    <div class="calendar-header">
                                        <div class="form-group row">
                                            <div class="col-sm-5 mb-sm-0">
                                                <select class="form-control" name="month" id="month-select"></select>
                                            </div>
                                            <div class="col-sm-7">
                                                <select class="form-control" name="year" id="year-select"></select>
                                            </div>
                                        </div>
                                    </div>
                                        <input class="form-control" type="submit" value="OK">
                                </form>


                            </div>

                            <div class="calendar-container" id="filter-with-calendar" style="display: none;">
                                <div class="calendar-header">
                                    <button id="prev-month">❮</button>
                                    <div id="month-year"></div>
                                    <button id="next-month">❯</button>
                                </div>
                                <div class="calendar">
                                    <div class="weekdays">
                                        <div>Sun</div>
                                        <div>Mon</div>
                                        <div>Tue</div>
                                        <div>Wed</div>
                                        <div>Thu</div>
                                        <div>Fri</div>
                                        <div>Sat</div>
                                    </div>
                                    <div class="days" id="days"></div>
                                </div>
                            </div>
                        </div>
                        <!-- ============================================================== -->
                        <!-- end doughnut chart  -->
                        <!-- ============================================================== -->
                    </div>
                    <div class="row">
                        <!-- ============================================================== -->
                        <!--multi line lables chart  -->
                        <!-- ============================================================== -->
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                            <div class="card">
                                <h5 class="card-header">Multi-line Labels</h5>
                                <div class="card-body">
                                    <div class="ct-chart-bipolar ct-golden-section"></div>
                                </div>
                            </div>
                        </div>
                        <!-- ============================================================== -->
                        <!-- end multi line lables chart  -->
                        <!-- ============================================================== -->
                        <!-- ============================================================== -->
                        <!-- bar chart  -->
                        <!-- ============================================================== -->
                        <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-12">
                            <div class="card">
                                <h5 class="card-header">Bar Charts</h5>
                                <div class="card-body">
                                    <canvas id="chartjs_bar"></canvas>
                                </div>
                            </div>
                        </div>
                        <!-- ============================================================== -->
                        <!-- end bar chart  -->
                        <!-- ============================================================== -->
                    </div>
                </div>
            </div>
        </div>
        <!-- ============================================================== -->
        <!-- footer -->
        <!-- ============================================================== -->

        <!-- ============================================================== -->
        <!-- end footer -->
        <!-- ============================================================== -->
    </div>
    <script>
        document.querySelectorAll('input[type="radio"][name="optionsChoice"]').forEach(radio => {
            // Thêm sự kiện 'change' cho mỗi radio button
            radio.addEventListener('change', (event) => {
                var displayRadioYes = '', displayRadioNo = ''
                if (event.target.value === 'yes') {
                    displayRadioYes = 'block'
                    displayRadioNo = 'none';
                } else {
                    displayRadioYes = 'none'
                    displayRadioNo = 'block';
                }
                document.getElementById('filter-with-calendar').style.display = displayRadioNo
                document.getElementById('filter-with-month-year').style.display = displayRadioYes
            });
        });

        const calendar = document.getElementById('days');
        const monthYear = document.getElementById('month-year');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');

        var currentDate = new Date();

        function renderCalendar(date) {
            const year = date.getFullYear();
            const month = date.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            // Set the month and year in the header
            monthYear.innerText = `${date.toLocaleString('default', {month: 'long'})} ${year}`;

            // Clear previous days
            calendar.innerHTML = '';

            // Add empty days for the first week
            for (let i = 0; i < firstDay; i++) {
                const emptyDiv = document.createElement('div');
                emptyDiv.classList.add('empty-day');
                calendar.appendChild(emptyDiv);
            }

            // Add the days of the month
            for (let i = 1; i <= daysInMonth; i++) {
                const dayDiv = document.createElement('div');
                dayDiv.classList.add('day');

                const form = document.createElement('form');
                form.method = 'POST';
                form.action = `/submit-date/${i}-${month + 1}-${year}`;

                const button = document.createElement('button');
                button.type = 'submit';
                button.innerText = i;

                form.appendChild(button);
                dayDiv.appendChild(form);
                calendar.appendChild(dayDiv);
            }
        }

        prevMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar(currentDate);
        });

        nextMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar(currentDate);
        });

        // Initial render
        renderCalendar(currentDate);

    </script>
    <script>
        const monthSelect = document.getElementById('month-select');
        const yearSelect = document.getElementById('year-select');
        const selectedMonthYear = document.getElementById('selected-month-year');

        var currentDate = new Date();

        function populateMonthSelect() {
            const months = [
                "1", "2", "3", "4", "5", "6",
                "7", "8", "9", "10", "11", "12"
            ];

            months.forEach((month, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.text = month;
                monthSelect.appendChild(option);
            });
        }

        function populateYearSelect() {
            const currentYear = new Date().getFullYear();
            const startYear = currentYear - 10;
            const endYear = currentYear;

            for (let year = startYear; year <= endYear; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.text = year;
                yearSelect.appendChild(option);
            }
        }


        // Initial population of month and year dropdowns
        populateMonthSelect();
        populateYearSelect();

        // Set default selections to current month and year
        monthSelect.value = currentDate.getMonth();
        yearSelect.value = currentDate.getFullYear();

        // Initial display of selected month and year
        updateSelectedMonthYear();


    </script>
</section>

<!-- JavaScript Libraries -->

</body>

</html>